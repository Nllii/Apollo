#!/bin/bash
# set -e

RED='\033[0;31m'
White="\[\033[0;37m\]"
END='\033[0m' 
Yellow="\033[0;93m[x]" 

# set -x
# check if python is installed
workflow_path=$(pwd)

function install_python(){
    echo -e "${Yellow}Installing Conda for python management${END}"
    cd ~/
    # curl -L -O "https://github.com/conda-forge/miniforge/releases/latest/download/Mambaforge-$(uname)-$(uname -m).sh"
    bash Mambaforge-$(uname)-$(uname -m).sh 
    echo "logout and login again to use"
    
}


if [ -x "$(command -v dev)" ]; then
    if [ "$workflow_path" == "$HOME" ]; then
        echo -e "${RED} - can't dev command call in home ${END}"
        else
        echo -e "${Yellow} - calling dev in folder: $workflow_path ${END}"
        python $HOME/workflow/developer_task.py
    fi
fi

if ! [ -x "$(command -v python)" ]; then
    echo -e "${RED}Error: python is not installed or not in your path. ${END}" >&2
    # install_python
    if ! [ -x "$(command -v conda activate )" ]; then
        echo "found python but not conda i will init it for you"
        # install_python
    else
        echo -e "${Yellow}Conda is installed and ready to use.${END}"
        # source activate 
        conda activate dev
        # exec conda activate base
        # conda init bash
        
        # conda create -n dev python=3.9 -y && conda activate dev


  fi

  
fi

